// TO DO --> Create a feature which allows the use of inline-block OR float, or flex (if easy enough).
// Create some edge case layouts to see how simple it is to override some selectors e.g. [class*=i-sm].i-g - ooh err!

@mixin interior(
	// The variables below are assigned values in: variables.scss.
	// They can be overridden by passing variable arguments to the @mixin.
	$grid-gutter-width: $grid-gutter-width,
	$grid-outer: ($grid-gutter-width / 2),
	$grid-cols: $grid-cols,
	$align: $align,
	$vert-space: $vert-space,
	$push: false,
	$push-cols: $grid-cols,
	$flip: false,
	$flip-cols: $grid-cols,
	$mq: null,
	$gu: false
) {
	// Wrap them all up in `.i-outer`
	.i-outer {
		padding: $grid-outer;
		// Clear all the things
		clear: both;
	}
	.i-row {
		padding: $vert-space;
		&:first-of-type {
			padding-top: 0;
		}
		&:last-of-type {
			padding-bottom: 0;
		}
		&:only-of-type {
			padding: 0;
		}
	}
	// Get the number of columns from the variable.
	$columns: $grid-cols;
	// Check to see if $mq is defined, if it is then interpolate the $mq variable name into the class.
	// Loop through a sequence of $column numbers, interpolating their value into the class e.g. `i-col-xs-1`.
	@for $column from 1 through $columns {
		@if $mq != null and $gu == false or not $mq == null {
			// Below needs negation if $gu is true
			.i-#{$mq}-#{$column} {
		   		width: 100% / $grid-cols * $column;
			}
		}
		@else if $mq != null and $gu == true {
			.i-#{$mq}-#{$column}-gu {
		   		width: calc(#{100% / $grid-cols * $column} - .31rem);
			}
		}
		@else if $gu == true and $mq == null {
			.i-col-#{$column}-gu {
		   		width: calc(#{100% / $grid-cols * $column} - .31rem);
			}
		}
		// If $mq is not defined then fall back to just including the column number into the class.
		@else if $mq == null {
			.i-col-#{$column} {
		   		width: 100% / $grid-cols * $column;
			}
		}
	}
	// This is set to true by default, to turn off set to false in @mixin.
	@if $push == true {
		@for $push-col from 1 through $push-cols {
			@if $mq != null {
				.i-#{$mq}-o-#{$push-col} {
			   		margin-left: 100% / $grid-cols * $push-col;
				}
			} @else {
				.i-o-#{$push-col} {
			   		margin-left: 100% / $grid-cols * $push-col;
				}
			}
		}		
	}
	// This is set to true by default, to turn off set to false in @mixin.
	@if $flip == true {
		@for $flip-col from 1 through $flip-cols {
			@if $mq != null {
				.i-#{$mq}-f {
					&l-#{$flip-col} {
				   		left: 100% / $grid-cols * $flip-col;
					}
					&r-#{$flip-col} {
				   		right: 100% / $grid-cols * $flip-col;
					}
				}
			} @else {
				.i-f {
					&l-#{$flip-col} {
				   		left: 100% / $grid-cols * $flip-col;
					}
					&r-#{$flip-col} {
				   		right: 100% / $grid-cols * $flip-col;
					}
				}
			}
		}
	}
	@if $mq != null and $gu == false or not $mq == null {
		.test {
			background: red;
		}
		[class*=i-#{$mq}] {
			padding: ($grid-gutter-width / 2);
			min-height: $col-min-height;
			position: relative;
			&.i-g {
				padding: $col-group-padding;
			}
			// if $align == left, right or center: display accordingly
			@include gridAlignment($align);
		}
	}
	@else if $mq != null and $gu == true {
		[class*=i-#{$mq}][class*=-gu] {
			padding: ($grid-gutter-width / 2);
			min-height: $col-min-height;
			position: relative;
			&.i-g {
				padding: $col-group-padding;
			}
			@include grid-utility();
		}
	}
	@else if $mq == null {
		[class*=i-col] {
			padding: ($grid-gutter-width / 2);
			min-height: $col-min-height;
			position: relative;
			&.i-g {
				padding: $col-group-padding;
			}
			// if $align == left, right or center: display accordingly
			@include gridAlignment($align);
		}
	}
}